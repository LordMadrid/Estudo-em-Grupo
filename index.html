
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Análise do meu tempo</title>
  
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Aptos+Display:wght@400;700&display=swap');
    body {
      margin: 0;
      font-family: 'Aptos Display', sans-serif;
      background: linear-gradient(135deg, #ffd6e9, #ffeaf6);
      color: #000;
      overflow-x: hidden;
      position: relative;
    }
    canvas.particle {
      position: fixed;
      top: 0; left: 0;
      z-index: -1;
      width: 100vw;
      height: 100vh;
    }
    h1 { text-align: center; font-size: 2.5em; margin-top: 30px; }
    form {
      max-width: 700px; margin: auto; background: #ffffffcc; padding: 20px;
      border-radius: 16px; box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    .question { margin-bottom: 20px; }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    select {
      width: 100%; padding: 8px; font-size: 16px;
      border-radius: 8px; border: 1px solid #ccc;
    }
    button {
      background-color: #bb4dbd; color: white; border: none;
      padding: 12px 24px; font-size: 16px; border-radius: 10px;
      cursor: pointer; display: block; margin: 30px auto 0;
    }
    button:hover { background-color: #9939a1; }
    #result {
      max-width: 800px; margin: 40px auto; padding: 20px;
      background: #fff; border-radius: 16px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    table {
      width: 100%; margin-top: 30px; border-collapse: collapse;
    }
    th, td { padding: 12px; text-align: left; border: 1px solid #eee; }
    th { background-color: #f2f2f2; }
    .pro td { background-color: #e8fff0; }
    .contra td { background-color: #ffe8e8; }
    .pro td:last-child {
      background: linear-gradient(to right, #d9ffd9, #b8f8b8);
    }
    .contra td:last-child {
      background: linear-gradient(to right, #ffd9d9, #f8b8b8);
    }
    .suggestions {
      margin-top: 30px; padding: 15px;
      background: #f0f5ff; border-left: 5px solid #8a4de8;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <canvas class="particle" id="bgCanvas"></canvas>
  <h1>Análise do meu tempo</h1>
  <div style="text-align: center; margin: 20px;">
    <label for="userName"><strong>Seu nome:</strong></label>
    <input type="text" id="userName" placeholder="Digite seu nome" style="padding: 8px; font-size: 16px; border-radius: 8px; border: 1px solid #ccc;" />
  </div>


  <form id="reflectionForm">
    <div class="question"><label>1. Meus compromissos ocupam quanto tempo do meu dia?</label>
      <select name="q1">
        <option value="pro">Pouco tempo</option>
        <option value="neutro">Moderado</option>
        <option value="contra">Quase o dia todo</option>
      </select>
    </div>
    <div class="question"><label>2. Consigo acrescentar mais uma responsabilidade sem desfalcar nos demais?</label>
      <select name="q2">
        <option value="pro">Sim, com tranquilidade</option>
        <option value="neutro">Talvez</option>
        <option value="contra">Não</option>
      </select>
    </div>
    <div class="question"><label>3. Um novo projeto consumiria minha disponibilidade a ponto de impactar compromissos diários?</label>
      <select name="q3">
        <option value="pro">Não afetaria</option>
        <option value="neutro">Afetaria pouco</option>
        <option value="contra">Sim, afetaria bastante</option>
      </select>
    </div>
    <div class="question"><label>4. Meu time está estruturado o suficiente ao ponto de eu me permitir participar de outro corpo/liga docente?</label>
      <select name="q4">
        <option value="pro">Totalmente estruturado</option>
        <option value="neutro">Mais ou menos</option>
        <option value="contra">Não está</option>
      </select>
    </div>
    <div class="question"><label>5. Quanto tempo me sobra para lazer e descanso?</label>
      <select name="q5">
        <option value="pro">Tempo suficiente</option>
        <option value="neutro">Pouco tempo</option>
        <option value="contra">Quase nenhum tempo</option>
      </select>
    </div>
    <div class="question"><label>6. Quanto da minha vida pessoal estou disposto a deixar de lado para focar no profissional?</label>
      <select name="q6">
        <option value="pro">Muito disposto</option>
        <option value="neutro">Disposto moderadamente</option>
        <option value="contra">Pouco ou nada disposto</option>
      </select>
    </div>
    <div class="question"><label>7. Sinto que tenho clareza das minhas prioridades atuais?</label>
      <select name="q7">
        <option value="pro">Sim, muito claro</option>
        <option value="neutro">Mais ou menos</option>
        <option value="contra">Não tenho clareza</option>
      </select>
    </div>
    <div class="question"><label>8. Meu nível de energia se mantém estável ao longo da semana?</label>
      <select name="q8">
        <option value="pro">Sim, estável</option>
        <option value="neutro">Oscila bastante</option>
        <option value="contra">Fico exausto frequentemente</option>
      </select>
    </div>
    <div class="question"><label>9. Tenho apoio emocional e suporte social disponíveis?</label>
      <select name="q9">
        <option value="pro">Sim, total</option>
        <option value="neutro">Moderado</option>
        <option value="contra">Quase nenhum</option>
      </select>
    </div>
    <div class="question"><label>10. Estou cuidando da minha saúde física e mental?</label>
      <select name="q10">
        <option value="pro">Sim</option>
        <option value="neutro">De forma irregular</option>
        <option value="contra">Não</option>
      </select>
    </div>
    <div class="question"><label>11. As decisões que tomo no trabalho alinham-se com meus valores?</label>
      <select name="q11">
        <option value="pro">Sim, completamente</option>
        <option value="neutro">Às vezes</option>
        <option value="contra">Não muito</option>
      </select>
    </div>
    <div class="question"><label>12. Estou satisfeito com meu nível atual de realização pessoal?</label>
      <select name="q12">
        <option value="pro">Sim</option>
        <option value="neutro">Parcialmente</option>
        <option value="contra">Não</option>
      </select>
    </div>
    <button type="button" onclick="analisar()">Analisar</button>
  </form>

  <div id="result"></div>
<div id="groupResults" style="max-width:800px;margin:40px auto;">
  <h2 style="text-align:center;">Média Geral da Turma</h2>
  <canvas id="mediaChart" width="400" height="250"></canvas>
</div>

<div style="text-align:center; margin-top:20px;"><button onclick="limparDados()">Limpar dados</button></div>

  <script>
    
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAX5stnsmfK9JOJN1W0Y7sD0gMUc0gdWu8",
      authDomain: "analise-de-tempo-30fba.firebaseapp.com",
      projectId: "analise-de-tempo-30fba",
      storageBucket: "analise-de-tempo-30fba.appspot.com",
      messagingSenderId: "601772246312",
      appId: "1:601772246312:web:ec37682f5ada7b86fe3c1d"
    };

    firebase.initializeApp(firebaseConfig);
    exibirMediaGeral();
    const db = firebase.firestore();
  </script>


  
function exibirMediaGeral() {
  db.collection("respostas").get().then(snapshot => {
    let totalPro = 0, totalContra = 0, totalUsuarios = 0;
    snapshot.forEach(doc => {
      const d = doc.data();
      totalPro += d.pro;
      totalContra += d.contra;
      totalUsuarios++;
    });
    const total = totalPro + totalContra;
    const proPct = total ? Math.round(totalPro * 100 / total) : 0;
    const contraPct = 100 - proPct;

    new Chart(document.getElementById("mediaChart"), {
      type: 'bar',
      data: {
        labels: ['Prós', 'Contras'],
        datasets: [{
          label: 'Média Geral (%)',
          data: [proPct, contraPct],
          backgroundColor: ['#00c853', '#d50000']
        }]
      },
      options: {
        scales: { y: { beginAtZero: true, max: 100 } }
      }
    });
  });
}


    function limparDados() {
    if (confirm("Deseja apagar todos os dados do Firebase?")) {
      db.collection("respostas").get().then(snapshot => {
        const batch = db.batch();
        snapshot.forEach(doc => batch.delete(doc.ref));
        return batch.commit();
      }).then(() => {
        alert("Todos os dados foram apagados.");
        location.reload();
      });
    }
  }


    function analisar() {
      const form = document.forms['reflectionForm'];
      const selects = [...form.elements].filter(e => e.tagName === 'SELECT');
      let pro = 0, contra = 0;
      const pros = [], contras = [];

      selects.forEach((el, i) => {
        const val = el.value;
        const text = el.options[el.selectedIndex].text;
        const question = el.previousElementSibling.textContent;

        if (val === 'pro') { pro++; pros.push([question, text]); }
        else if (val === 'contra') { contra++; contras.push([question, text]); }
      });

      const total = pro + contra;
      const proPct = total ? Math.round(pro * 100 / total) : 0;
      const contraPct = 100 - proPct;
      const canvasID = `chart-${Date.now()}`;
      const barID = `bar-${Date.now()}`;

      let html = `
        <h2>Resultado da Análise</h2>
        <p><strong>${proPct}% Prós</strong> vs <strong>${contraPct}% Contras</strong></p>
        <canvas id="${canvasID}" width="300" height="300"></canvas>
        <canvas id="${barID}" width="400" height="250" style="margin-top:30px;"></canvas>
        <table><tr><th>Tipo</th><th>Pergunta</th><th>Resposta</th></tr>`;

      pros.forEach(([q, r]) => html += `<tr class="pro"><td>Pró</td><td>${q}</td><td>${r}</td></tr>`);
      contras.forEach(([q, r]) => html += `<tr class="contra"><td>Contra</td><td>${q}</td><td>${r}</td></tr>`);
      html += `</table>`;

      if (contra > pro) {
        html += `<div class="suggestions">
          <strong>Sugestões baseadas na sua análise:</strong>
          <ul>
            <li>Considere delegar mais tarefas ou redistribuir sua agenda semanal.</li>
            <li>Reavalie o equilíbrio entre vida pessoal e profissional.</li>
            <li>Busque momentos de lazer para preservar sua energia emocional.</li>
            <li>Fortaleça sua rede de apoio e momentos de autocuidado.</li>
          </ul>
        </div>`;
      }

      document.getElementById('result').innerHTML = html;

      new Chart(document.getElementById(canvasID), {
        type: 'pie',
        data: {
          labels: ['Prós', 'Contras'],
          datasets: [{
            data: [proPct, contraPct],
            backgroundColor: ['#9b59b6', '#d291bc']
          }]
        }
      });

      new Chart(document.getElementById(barID), {
        type: 'bar',
        data: {
          labels: ['Prós', 'Contras'],
          datasets: [{
            label: 'Impacto (%)',
            data: [proPct, contraPct],
            backgroundColor: ['#7d3c98', '#c39bd3']
          }]
        },
        options: {
          scales: { y: { beginAtZero: true, max: 100 } }
        }
      });
    }

    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let balls = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    for (let i = 0; i < 60; i++) {
      balls.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height,
        r: Math.random()*15+5, dx: Math.random()*0.5-0.25, dy: Math.random()*0.5-0.25 });
    }
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let b of balls) {
        ctx.beginPath();
        ctx.arc(b.x, b.y, b.r, 0, 2*Math.PI);
        ctx.fillStyle = 'rgba(255,255,255,0.7)';
        ctx.fill();
        b.x += b.dx; b.y += b.dy;
        if (b.x < 0 || b.x > canvas.width) b.dx *= -1;
        if (b.y < 0 || b.y > canvas.height) b.dy *= -1;
      }
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
